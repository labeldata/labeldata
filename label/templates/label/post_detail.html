{% extends 'base.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <h3>{{ post.title }}</h3>
        <p><strong>식품유형:</strong> {{ post.food_type }}</p>
        <p><strong>제조사:</strong> {{ post.manufacturer }}</p>
        <p><strong>원재료명:</strong> {{ post.ingredients }}</p>
        <p><strong>보관조건:</strong> {{ post.storage_conditions }}</p>
        <p><strong>기타 주의사항:</strong> {{ post.precautions }}</p>
        <p><strong>등록자:</strong> {{ post.author.username }}</p>
        <p><strong>등록일:</strong> {{ post.create_date|date:"Y-m-d H:i" }}</p>
        {% if post.modify_date %}
            <p><strong>수정일:</strong> {{ post.modify_date|date:"Y-m-d H:i" }}</p>
        {% endif %}
    </div>
    <div class="card-footer text-muted">
        {% if user == post.author %}
            <a href="{% url 'label:post_edit' post.id %}" class="btn btn-warning btn-sm">수정</a>
            <a href="{% url 'label:post_delete' post.id %}" class="btn btn-danger btn-sm">삭제</a>
        {% endif %}
    </div>
</div>
<h4>댓글</h4>
<ul class="list-group">
    {% for comment in post.comments.all %}
        <li class="list-group-item">
            {{ comment.content }} - {{ comment.author.username }}
            {% if user == comment.author %}
                <a href="{% url 'label:comment_edit' comment.id %}" class="btn btn-sm btn-secondary">수정</a>
                <a href="{% url 'label:comment_delete' comment.id %}" class="btn btn-sm btn-danger">삭제</a>
            {% endif %}
        </li>
    {% endfor %}
</ul>
<form method="post" class="mt-3">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit" class="btn btn-primary">댓글 작성</button>
</form>
{% endblock %}
