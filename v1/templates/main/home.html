{% extends 'base.html' %}
{% load static %}
{% block title %}ê°„í¸í•œ í‘œì‹œì‚¬í•­ ì—°êµ¬ì†Œ{% endblock %}

{% block content %}
<main class="home-container">
    <!-- ë©”ì¸ ì†Œê°œ ì„¹ì…˜ -->
    <section class="intro-section">
        <header class="intro-header">
            <h1 class="intro-title">"ê°„í¸í•œ í‘œì‹œì‚¬í•­ ì—°êµ¬ì†Œ"ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</h1>
            <p class="intro-description">ë³µì¡í•œ í‘œì‹œì‚¬í•­ ì‘ì„±, ì´ì œ ì‰½ê³  ë¹ ë¥´ê²Œ í•´ê²°í•˜ì„¸ìš”.</p>
        </header>
        
        <div class="home-actions">
            <button id="start-tutorial-btn" class="action-btn tutorial-btn">
                <span class="btn-icon">ğŸš€</span>
                <span class="btn-text">ì£¼ìš” ê¸°ëŠ¥ ë‘˜ëŸ¬ë³´ê¸°</span>
            </button>

            {% if user.is_authenticated %}
                {# ë¡œê·¸ì¸ ì‚¬ìš©ì: í´ë¦­ ì‹œ JSë¡œ ìƒˆ ë¼ë²¨ ìƒì„± #}
                <button id="create-new-label-btn" class="action-btn create-btn">
                    <span class="btn-icon">âœ¨</span>
                    <span class="btn-text">í‘œì‹œì‚¬í•­ ì‹ ê·œ ì‘ì„±</span>
                </button>
            {% else %}
                {# ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì: í´ë¦­ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ #}
                <a href="/user-management/login/" class="action-btn create-btn" style="text-decoration: none;">
                    <span class="btn-icon">âœ¨</span>
                    <span class="btn-text">í‘œì‹œì‚¬í•­ ì‹ ê·œ ì‘ì„±</span>
                </a>
            {% endif %}
        </div>
    </section>

    <!-- í•˜ë‹¨ ê¸°ëŠ¥ ì œì•ˆ ì„¹ì…˜ -->
    <section class="highlight-feature">
        <span>ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</span>
        <a href="{% url 'board:list' %}" class="cta-button">ê²Œì‹œíŒì— ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš” ğŸ˜Š</a>
    </section>
</main>

<!-- íŠœí† ë¦¬ì–¼ ì˜¤ë²„ë ˆì´ UI -->
<div id="tutorial-overlay" style="display: none;">
    <div class="tutorial-dialog">
        <header class="tutorial-header">
            <h3 id="tutorial-title"></h3>
            <button id="tutorial-close-btn" class="tutorial-btn-close" aria-label="íŠœí† ë¦¬ì–¼ ë‹«ê¸°">&times;</button>
        </header>
        <div class="tutorial-body">
            <img id="tutorial-image" src="" alt="íŠœí† ë¦¬ì–¼ ë‹¨ê³„ë³„ ì˜ˆì‹œ í™”ë©´">
            <p id="tutorial-description"></p>
        </div>
        <footer class="tutorial-footer">
            <button id="tutorial-prev-btn" class="tutorial-nav-btn">&lt; ì´ì „</button>
            <div id="tutorial-progress-bar"></div>
            <button id="tutorial-next-btn" class="tutorial-nav-btn">ë‹¤ìŒ &gt;</button>
        </footer>
    </div>
</div>

<style>
/* --- ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ë° ìƒ‰ìƒ ë³€ìˆ˜, ë„¤ë¹„ë°” ë°°ê²½ìƒ‰ ì˜¤ì ìš© ê°œì„ ì„ ìœ„í•´ì„œ ìŠ¤íƒ€ì¼ ì ìš© ë²”ìœ„ë¥¼ í™ˆì»¨í…Œì´ë„ˆë¡œ í•œì • --- */
.home-container {
    --primary-color: #38b2ac;
    --primary-dark: #319795;
    --primary-light: #e6fffa;
    --text-dark: #2d3748;
    --text-light: #4a5568;
    --bg-light: #f7fafc;
    --border-color: #e2e8f0;
}

.home-container {
    max-width: 1100px;
    margin: 4rem auto;
    padding: 0 1rem;
}

/* --- ì†Œê°œ ì„¹ì…˜ --- */
.intro-section {
    background-color: var(--bg-light);
    padding: 3rem 2rem;
    border-radius: 16px;
    text-align: center;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);
}
.intro-title {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 800;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
}
.intro-description {
    font-size: clamp(1.1rem, 2.5vw, 1.25rem);
    color: var(--text-light);
    margin-bottom: 3rem;
}

/* --- ì•¡ì…˜ ë²„íŠ¼ --- */
.home-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: center;
}
.action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 300px;
    height: 220px;
    padding: 2rem;
    border-radius: 16px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}
.action-btn:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.12);
}
.action-btn .btn-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
    transition: transform 0.3s ease;
}
.action-btn:hover .btn-icon {
    transform: scale(1.1);
}
.action-btn .btn-text {
    font-size: 1.5rem;
    font-weight: 700;
}

.tutorial-btn {
    background: linear-gradient(145deg, #ffffff, #f0fdfa);
    color: var(--primary-dark);
    border: 2px solid var(--primary-color);
}
.create-btn {
    background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
    color: white;
}

/* --- í•˜ë‹¨ ê¸°ëŠ¥ ì œì•ˆ ì„¹ì…˜ --- */
.highlight-feature {
    margin-top: 3rem;
    padding: 1.25rem 2rem;
    background-color: var(--primary-light);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
}
.highlight-feature span {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--primary-dark);
}
.cta-button {
    background-color: var(--primary-color);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.3s ease;
}
.cta-button:hover { background-color: var(--primary-dark); }

/* --- íŠœí† ë¦¬ì–¼ ì˜¤ë²„ë ˆì´ --- */
#tutorial-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}
.tutorial-dialog {
    background-color: white;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    width: 100%;
    max-width: 800px;
    max-height: 95vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
.tutorial-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border-color);
}
#tutorial-title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-dark);
}
.tutorial-btn-close {
    font-size: 2rem;
    font-weight: 300;
    background: none;
    border: none;
    color: var(--text-light);
    cursor: pointer;
    line-height: 1;
    padding: 0.5rem;
}
.tutorial-body {
    padding: 1.5rem;
    overflow-y: auto;
    text-align: center;
}
#tutorial-image {
    max-width: 100%;
    height: auto;
    max-height: 50vh;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    object-fit: contain;
}
#tutorial-description {
    font-size: 1.1rem;
    line-height: 1.6;
    color: var(--text-dark);
}
.highlight-text {
    color: var(--primary-dark);
    font-weight: 700;
}
.tutorial-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border-color);
    background-color: var(--bg-light);
}
.tutorial-nav-btn {
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
}
.tutorial-nav-btn:hover { background-color: var(--primary-dark); }
.tutorial-nav-btn:disabled { background-color: #ccc; cursor: not-allowed; }

#tutorial-progress-bar { display: flex; gap: 8px; }
.progress-dot {
    width: 10px; height: 10px; border-radius: 50%;
    background-color: #ccc;
    cursor: pointer;
    transition: background-color 0.3s;
}
.progress-dot.active { background-color: var(--primary-color); }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {

    // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    // --- ì‹ ê·œ í‘œì‹œì‚¬í•­ ì‘ì„± ê¸°ëŠ¥ ---
    const createNewLabelBtn = document.getElementById('create-new-label-btn');
    if (createNewLabelBtn) {
        createNewLabelBtn.addEventListener('click', () => {
            if (confirm("ìƒˆë¡œìš´ í‘œì‹œì‚¬í•­ì„ ì‘ì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                fetch("{% url 'label:create_new_label' %}", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({})
                })
                .then(response => {
                    if (!response.ok) return response.json().then(err => { throw new Error(err.error || 'ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜'); });
                    return response.json();
                })
                .then(data => {
                    if (data.success && data.redirect_url) {
                        window.location.href = data.redirect_url;
                    } else {
                        alert('ì‹ ê·œ í‘œì‹œì‚¬í•­ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert(`ì‹ ê·œ í‘œì‹œì‚¬í•­ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
                });
            }
        });
    }

    // --- íŠœí† ë¦¬ì–¼ ê¸°ëŠ¥ ---
    const tutorialModule = {
        // DOM ìš”ì†Œ
        elements: {
            overlay: document.getElementById('tutorial-overlay'),
            startBtn: document.getElementById('start-tutorial-btn'),
            closeBtn: document.getElementById('tutorial-close-btn'),
            nextBtn: document.getElementById('tutorial-next-btn'),
            prevBtn: document.getElementById('tutorial-prev-btn'),
            title: document.getElementById('tutorial-title'),
            image: document.getElementById('tutorial-image'),
            description: document.getElementById('tutorial-description'),
            progressBar: document.getElementById('tutorial-progress-bar'),
        },
        // íŠœí† ë¦¬ì–¼ ë°ì´í„°
        steps: [
            { title: 'ì œí’ˆ ì¡°íšŒ(1) : êµ­ë‚´/ìˆ˜ì…ì œí’ˆ ê²€ìƒ‰', image: "{% static 'img/tutorial/step-1-1.png' %}", description: 'êµ­ë‚´ì™¸ 150ë§Œ ê±´ì˜ í‘œì‹œì‚¬í•­ì„ <span class="highlight-text">â‘ ì¡°ê±´ ê²€ìƒ‰, â‘¡í’ˆëª© ì„ íƒ</span> í›„ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
            { title: 'ì œí’ˆ ì¡°íšŒ(2) : ì›ë£Œ, ì œí’ˆ ì €ì¥', image: "{% static 'img/tutorial/step-1-2.png' %}", description: 'ì œí’ˆ ì •ë³´ëŠ” <span class="highlight-text">â‘ ë‚´ì›ë£Œ ì €ì¥, â‘¡í‘œì‹œì‚¬í•­ ìƒì„±</span> ë²„íŠ¼ìœ¼ë¡œ ì‰½ê²Œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
            { title: 'ì›ë£Œ ê´€ë¦¬(1) : ìƒì„¸ì •ë³´ ê´€ë¦¬', image: "{% static 'img/tutorial/step-2-1.png' %}", description: 'ì›ë£Œ ë¦¬ìŠ¤íŠ¸ì—ì„œ <span class="highlight-text">â‘ ì„ íƒ í›„ â‘¡ìƒì„¸ì •ë³´ ì…ë ¥, â‘¢ì €ì¥</span>í•˜ë©´ í‘œì‹œì‚¬í•­ ì‘ì„±í•  ë•Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>â€»ì‹í’ˆì²¨ê°€ë¬¼ì€ ê´€ë ¨ ê·œì •ì— ë”°ë¼ í‘œì‹œë¬¸êµ¬ë¥¼ ì¶”ì²œí•´ì¤ë‹ˆë‹¤.' },
            { title: 'ì›ë£Œ ê´€ë¦¬(2) : ì‹ ê·œë“±ë¡, ì—‘ì…€ ë‹¤ìš´/ì—…ë¡œë“œ', image: "{% static 'img/tutorial/step-2-2.png' %}", description: 'ì›ë£Œ ì •ë³´ëŠ” <span class="highlight-text">â‘ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë° ì¼ê´„ ì—…ë¡œë“œ, â‘¡ì‹ ê·œ ì¶”ê°€</span>ë„ ê°€ëŠ¥í•˜ë©°, <span class="highlight-text">â‘¢ì—°ê²°ëœ í‘œì‹œì‚¬í•­ì„ ì§ì ‘ ì¡°íšŒ</span>í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br>â€»ì—‘ì…€ ì—…ë¡œë“œ ì‹œì—ëŠ” ë‹¤ìš´ë°›ì€ ì–‘ì‹ì— ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì—¬ ì—…ë¡œë“œí•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' },
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(1) : ë‹¤ìš´ë¡œë“œ,ë³µì‚¬,ì‚­ì œ, í’ˆë³´ì‹ ê³  ê²€ì¦', image: "{% static 'img/tutorial/step-3-1.png' %}", description: 'í‘œì‹œì‚¬í•­ ë¦¬ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ì—¬ <span class="highlight-text">â‘ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ, ë³µì‚¬, ì‚­ì œ</span>ë¥¼ í•  ìˆ˜ ìˆê³ , <br>í‘œì‹œì‚¬í•­ì— ì…ë ¥í•œ í’ˆëª©ë³´ê³ ë²ˆí˜¸ì˜ <span class="highlight-text">â‘¡ì‹¤ì œ ì‹ ê³  ì—¬ë¶€ë„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸</span> ê°€ëŠ¥í•©ë‹ˆë‹¤.' },
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(2) : ì‹í’ˆìœ í˜•ë³„ í•„ìˆ˜í•­ëª© ìë™ ì¶”ì²œ', image: "{% static 'img/tutorial/step-3-2.png' %}", description: 'í‘œì‹œì‚¬í•­ ì‘ì„± í™”ë©´ì—ì„œ <span class="highlight-text">â‘ ì‹í’ˆìœ í˜• ì„ íƒ, â‘¡ì œì¡°ë°©ë²• ë° ì¥ê¸°ë³´ì¡´ ì„ íƒ, â‘¢í•„ìˆ˜í•­ëª© ì ìš© í›„ ì ‘ê¸°</span> ë²„íŠ¼ì„ í´ë¦­í•˜ë©´,<br> "ìƒì„¸ ì…ë ¥" í™”ë©´ì˜ í•„ìˆ˜ í•­ëª©ì´ ìë™ ì²´í¬ë˜ê³ , ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ì„œëŠ” ì‹í’ˆìœ í˜•ë³„ ê´€ë ¨ ê·œì •ë„ í‘œì‹œë©ë‹ˆë‹¤.' },
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(3) : ìƒì„¸ì •ë³´ ì…ë ¥', image: "{% static 'img/tutorial/step-3-3.png' %}", description: 'ê° í•­ëª©ì˜ ì…ë ¥í•„ë“œë¥¼ ì„ íƒí•˜ë©´ ì˜¤ë¥¸ìª½ íŒ¨ë„ì— <span class="highlight-text">â‘ ê´€ë ¨ ê·œì • í‘œì‹œ</span>ë˜ê³  ë° <span class="highlight-text">â‘ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¬¸êµ¬ ë“±ë¡ ë° ì„ íƒí•˜ì—¬ ì‰½ê²Œ ì…ë ¥</span>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br>í’ˆëª©ë³´ê³ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ë²ˆí˜¸ê²€ì¦ ê¸°ëŠ¥ì„ í†µí•´<span class="highlight-text">â‘¡ì‚¬ìš© ì—¬ë¶€ë¥¼ ì‹¤ì‹œê°„ í™•ì¸</span>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì›ë£Œ ê´€ë¦¬ì—ì„œ ë“±ë¡í•œ ì›ë£Œë¥¼ "í‘œë¡œ ì…ë ¥" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ <span class="highlight-text">â‘¢ì›ì¬ë£Œëª… ìë™ ì¶”ì²œ ê¸°ëŠ¥</span>ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },        
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(4) : ì›ì¬ë£Œ í‘œì‹œëª… ì¶”ì²œ', image: "{% static 'img/tutorial/step-3-4.png' %}", description: 'ë“±ë¡ëœ ì›ë£Œë¥¼ ê²€ìƒ‰í•˜ì—¬ <span class="highlight-text">â‘ ì¶”ê°€, â‘¡ ë¹„ìœ¨ ì…ë ¥ì´ë‚˜ ìˆœì„œ ë³€ê²½, â‘¢ í‘œì‹œê·œì¹™ ì„ íƒ</span>í•˜ë©´ <br> ì›ì¬ë£Œ í‘œì‹œëª… ë° ì•Œë ˆë¥´ê¸°/GMO ì„±ë¶„ì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³ , ì‹í’ˆìœ í˜• ë° í•¨ëŸ‰ì— ë”°ë¥¸ ì›ì‚°ì§€ í‘œì‹œëŒ€ìƒê³¼ êµ­ê°€ëª… í¬í•¨ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ì¤ë‹ˆë‹¤.' },
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(5) : í‘œì‹œì‚¬í•­ ë¯¸ë¦¬ë³´ê¸°', image: "{% static 'img/tutorial/step-3-5.png' %}", description: 'í‘œì‹œì‚¬í•­ ì‘ì„± í™”ë©´ì˜ ìš°ì¸¡ ìƒë‹¨ "ë¯¸ë¦¬ë³´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•œê¸€í‘œì‹œì‚¬í•­ì˜<span class="highlight-text">â‘ í¬ê¸° ì„¤ì • ë³€ê²½</span>í•˜ê³ , <span class="highlight-text">â‘¡ë¶„ë¦¬ë°°ì¶œ ë§ˆí¬ ì¶”ê°€</span> ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
            { title: 'í‘œì‹œì‚¬í•­ ê´€ë¦¬(6) : ê·œì • ê²€ì¦ ë° PDF ì €ì¥', image: "{% static 'img/tutorial/step-3-6.png' %}", description: 'ì™„ì„±ëœ í‘œì‹œì‚¬í•­ì´ <span class="highlight-text">â‘ ê·œì •ì— ë§ëŠ”ì§€ ê²€ì¦</span>í•˜ê³ , ê²°ê³¼ë¥¼ <span class="highlight-text">â‘¡PDF íŒŒì¼ë¡œ ì €ì¥</span>í•˜ì—¬ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' }
        ],
        currentStep: 0,

        init() {
            if (!this.elements.startBtn) return;
            this.elements.startBtn.addEventListener('click', () => this.start());
            this.elements.closeBtn.addEventListener('click', () => this.end());
            this.elements.nextBtn.addEventListener('click', () => this.showStep(this.currentStep + 1));
            this.elements.prevBtn.addEventListener('click', () => this.showStep(this.currentStep - 1));
            document.addEventListener('keydown', (e) => this.handleKeyPress(e));
        },
        start() {
            this.createProgressBar();
            this.elements.overlay.style.display = 'flex';
            this.showStep(0);
        },
        end() {
            this.elements.overlay.style.display = 'none';
        },
        showStep(index) {
            if (index < 0 || index >= this.steps.length) return;
            this.currentStep = index;
            const step = this.steps[index];
            
            this.elements.title.textContent = step.title;
            this.elements.image.src = step.image;
            this.elements.description.innerHTML = step.description;

            this.elements.prevBtn.disabled = index === 0;
            this.elements.nextBtn.disabled = index === this.steps.length - 1;

            this.updateProgressBar();
        },
        handleKeyPress(e) {
            if (this.elements.overlay.style.display !== 'flex') return;
            if (e.key === 'ArrowRight') this.showStep(this.currentStep + 1);
            else if (e.key === 'ArrowLeft') this.showStep(this.currentStep - 1);
            else if (e.key === 'Escape') this.end();
        },
        createProgressBar() {
            this.elements.progressBar.innerHTML = '';
            this.steps.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.classList.add('progress-dot');
                dot.dataset.index = index;
                dot.addEventListener('click', () => this.showStep(index));
                this.elements.progressBar.appendChild(dot);
            });
        },
        updateProgressBar() {
            this.elements.progressBar.querySelectorAll('.progress-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === this.currentStep);
            });
        }
    };

    tutorialModule.init();
});
</script>

{% endblock %}