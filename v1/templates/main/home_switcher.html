{% load static %}
{% load django_bootstrap5 %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>홈 화면 선택 - Food Data Portal</title>
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    {% bootstrap_css %}
    <style>
        * { box-sizing: border-box; }
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #f0f4ff 0%, #fafafa 60%, #e8f5e9 100%);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; padding: 32px 16px;
        }

        .page-logo {
            font-size: 22px; font-weight: 800; color: #1a73e8;
            letter-spacing: -0.5px; margin-bottom: 6px;
            display: flex; align-items: center; gap: 10px;
        }
        .page-logo i { font-size: 24px; }
        .page-tagline {
            font-size: 14px; color: #5f6368; margin-bottom: 40px; text-align: center;
        }

        .switch-container {
            display: flex; gap: 24px; flex-wrap: wrap;
            justify-content: center;
            max-width: 860px; width: 100%;
            margin-bottom: 32px;
        }

        .home-card {
            flex: 1; min-width: 320px; max-width: 400px;
            background: #fff;
            border-radius: 20px;
            border: 2px solid transparent;
            padding: 36px 32px 28px;
            box-shadow: 0 4px 24px rgba(0,0,0,.07);
            cursor: pointer;
            transition: border-color 0.2s, box-shadow 0.2s, transform 0.18s;
            text-decoration: none; color: inherit;
            display: flex; flex-direction: column; gap: 16px;
            position: relative;
            overflow: hidden;
        }
        .home-card:hover {
            border-color: var(--brand, #1a73e8);
            box-shadow: 0 8px 32px rgba(26,115,232,.14);
            transform: translateY(-4px);
            color: inherit; text-decoration: none;
        }
        .home-card::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; height: 4px;
            background: var(--brand, #1a73e8);
            border-radius: 20px 20px 0 0;
        }

        .card-badge {
            display: inline-flex; align-items: center; gap: 5px;
            font-size: 11px; font-weight: 700; padding: 3px 10px;
            border-radius: 12px; width: fit-content;
            letter-spacing: 0.3px;
        }

        .card-icon-wrap {
            width: 56px; height: 56px; border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            font-size: 26px;
        }

        .card-title { font-size: 20px; font-weight: 700; color: #1f1f1f; }
        .card-sub   { font-size: 13px; color: #5f6368; line-height: 1.6; }

        .card-features { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px; }
        .card-features li {
            display: flex; align-items: flex-start; gap: 9px;
            font-size: 13px; color: #3c4043;
        }
        .card-features li i { margin-top: 2px; flex-shrink: 0; }

        .card-cta {
            display: flex; align-items: center; justify-content: center; gap: 7px;
            padding: 12px;
            border-radius: 12px;
            font-size: 14px; font-weight: 600;
            margin-top: 8px;
            transition: opacity 0.15s;
        }
        .card-cta:hover { opacity: 0.88; }

        /* V2 카드 */
        .card-v2 { --brand: #1a73e8; }
        .card-v2 .card-badge { background: #e8f0fe; color: #1967d2; }
        .card-v2 .card-icon-wrap { background: #e8f0fe; color: #1967d2; }
        .card-v2 .card-cta { background: #1a73e8; color: #fff; }

        /* V1 카드 */
        .card-v1 { --brand: #319795; }
        .card-v1 .card-badge { background: #e0f7f4; color: #2c7a7b; }
        .card-v1 .card-icon-wrap { background: #e0f7f4; color: #2c7a7b; }
        .card-v1 .card-cta { background: #319795; color: #fff; }

        /* 하단 주석 */
        .footer-note {
            font-size: 12px; color: #9aa0a6; text-align: center;
            max-width: 500px;
        }
        .footer-note a { color: #1a73e8; }

        /* 로그인/비로그인 배너 */
        .auth-bar {
            background: #fff;
            border: 1px solid #e8eaed;
            border-radius: 40px;
            padding: 9px 20px;
            font-size: 13px; color: #5f6368;
            display: flex; align-items: center; gap: 12px;
            margin-bottom: 28px;
            box-shadow: 0 1px 4px rgba(0,0,0,.05);
        }
        .auth-bar strong { color: #1f1f1f; }
        .auth-bar a { color: #1a73e8; text-decoration: none; font-weight: 500; }
        .auth-bar a:hover { text-decoration: underline; }
    </style>
</head>
<body>

    <!-- 로고 -->
    <div class="page-logo">
        <i class="bi bi-hexagon-fill"></i> Food Data Portal
    </div>
    <p class="page-tagline">사용할 홈 화면을 선택해주세요</p>

    <!-- 로그인 상태 표시 -->
    <div class="auth-bar">
        {% if request.user.is_authenticated %}
        <i class="bi bi-person-check-fill text-success"></i>
        <strong>{{ request.user.username }}</strong>님으로 로그인 중
        <a href="{% url 'user_management:logout' %}">로그아웃</a>
        {% else %}
        <i class="bi bi-person-circle" style="color:#5f6368;"></i>
        로그인하지 않은 상태
        <a href="{% url 'user_management:login' %}">로그인</a>
        <a href="{% url 'user_management:signup' %}">회원가입</a>
        {% endif %}
    </div>

    <div class="switch-container">

        <!-- V2 대시보드 카드 -->
        <a href="{% if request.user.is_authenticated %}{% url 'main:home_dashboard' %}{% else %}{% url 'user_management:login' %}?next={% url 'main:home_dashboard' %}{% endif %}" class="home-card card-v2">
            <span class="card-badge"><i class="bi bi-stars"></i> 신규 · 권장</span>
            <div class="card-icon-wrap">
                <i class="bi bi-layout-text-sidebar-reverse"></i>
            </div>
            <div>
                <div class="card-title">식품 데이터 관리 포털</div>
                <div class="card-sub mt-1">제품 현황, 협업, 문서·BOM을 한눈에 파악하는 통합 관리 대시보드입니다.</div>
            </div>
            <ul class="card-features">
                <li><i class="bi bi-check-circle-fill text-primary"></i>제품별 진행상태 및 승인 워크플로우</li>
                <li><i class="bi bi-check-circle-fill text-primary"></i>팀원 초대 & 역할 기반 권한 관리</li>
                <li><i class="bi bi-check-circle-fill text-primary"></i>문서 만료 알림 & 통합 알림 센터</li>
                <li><i class="bi bi-check-circle-fill text-primary"></i>원료 BOM · 영양성분 통합 관리</li>
            </ul>
            <div class="card-cta">
                <i class="bi bi-arrow-right-circle-fill"></i>
                신규 사이트 이동
            </div>
        </a>

        <!-- V1 클래식 카드 -->
        <a href="{% url 'main:home_v1' %}" class="home-card card-v1">
            <span class="card-badge"><i class="bi bi-lightning-fill"></i> 빠른 작성</span>
            <div class="card-icon-wrap">
                <i class="bi bi-file-earmark-text"></i>
            </div>
            <div>
                <div class="card-title">표시사항 간편 작성 홈</div>
                <div class="card-sub mt-1">로그인 없이도 즉시 표시사항을 작성할 수 있는 빠른 도구입니다.</div>
            </div>
            <ul class="card-features">
                <li><i class="bi bi-check-circle-fill" style="color:#2c7a7b;"></i>로그인 없이 즉시 표시사항 작성</li>
                <li><i class="bi bi-check-circle-fill" style="color:#2c7a7b;"></i>국내 식품 DB 기반 표시항목 자동 입력</li>
                <li><i class="bi bi-check-circle-fill" style="color:#2c7a7b;"></i>실시간 미리보기 & PDF 출력</li>
                <li><i class="bi bi-check-circle-fill" style="color:#2c7a7b;"></i>알레르기 성분 자동 감지</li>
            </ul>
            <div class="card-cta">
                <i class="bi bi-pencil-square"></i>
                기존 사이트 이동
            </div>
        </a>

    </div>

    <p class="footer-note">
        나중에 언제든지 각 홈화면 상단의 <strong>홈 전환</strong> 버튼이나
        사이드바의 <strong>홈</strong> 메뉴로 다시 이 페이지로 돌아올 수 있습니다.<br>
        문의: <a href="{% url 'board:list' %}">게시판</a>
    </p>

    {% bootstrap_javascript %}
</body>
</html>
